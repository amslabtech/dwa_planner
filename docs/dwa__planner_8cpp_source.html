<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>dwa_planner: dwa_planner.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dwa_planner.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dwa__planner_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2020 amsl</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dwa__planner_8h.html">dwa_planner/dwa_planner.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#add9a8c8f11e295e5546ba6a3b203b244">   10</a></span>&#160;<a class="code" href="classDWAPlanner.html#add9a8c8f11e295e5546ba6a3b203b244">DWAPlanner::DWAPlanner</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    : local_nh_(<span class="stringliteral">&quot;~&quot;</span>), odom_updated_(false), local_map_updated_(false), scan_updated_(false), has_reached_(false),</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;      use_speed_cost_(false), odom_not_subscribe_count_(0), local_map_not_subscribe_count_(0),</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;      scan_not_subscribe_count_(0)</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <a class="code" href="classDWAPlanner.html#a7ff50924e740d16a990e607ec5a043cd">load_params</a>();</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  ROS_INFO(<span class="stringliteral">&quot;=== DWA Planner ===&quot;</span>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  <a class="code" href="classDWAPlanner.html#accb330377e1503287d4228d334b61287">print_params</a>();</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <a class="code" href="classDWAPlanner.html#a87a87a7fe7eb6f6b279af965da562d6f">velocity_pub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.advertise&lt;geometry_msgs::Twist&gt;(<span class="stringliteral">&quot;/cmd_vel&quot;</span>, 1);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <a class="code" href="classDWAPlanner.html#a05cec7ce1a8d75286d3c2a757bb7fd40">candidate_trajectories_pub_</a> = <a class="code" href="classDWAPlanner.html#a5508317f853be8074ec762e9204526e4">local_nh_</a>.advertise&lt;visualization_msgs::MarkerArray&gt;(<span class="stringliteral">&quot;candidate_trajectories&quot;</span>, 1);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <a class="code" href="classDWAPlanner.html#ac0032d860e85f03c309168f6e557e39f">selected_trajectory_pub_</a> = <a class="code" href="classDWAPlanner.html#a5508317f853be8074ec762e9204526e4">local_nh_</a>.advertise&lt;visualization_msgs::Marker&gt;(<span class="stringliteral">&quot;selected_trajectory&quot;</span>, 1);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <a class="code" href="classDWAPlanner.html#a966a8178627cee9001f042a07d934aec">predict_footprints_pub_</a> = <a class="code" href="classDWAPlanner.html#a5508317f853be8074ec762e9204526e4">local_nh_</a>.advertise&lt;visualization_msgs::MarkerArray&gt;(<span class="stringliteral">&quot;predict_footprints&quot;</span>, 1);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="classDWAPlanner.html#a655d7e12cbe359f26dfcf5b52e7a6b33">finish_flag_pub_</a> = <a class="code" href="classDWAPlanner.html#a5508317f853be8074ec762e9204526e4">local_nh_</a>.advertise&lt;std_msgs::Bool&gt;(<span class="stringliteral">&quot;finish_flag&quot;</span>, 1);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classDWAPlanner.html#a9ff6bc1bb61fb6d9a94310a949b3d58f">dist_to_goal_th_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/dist_to_goal_th&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#aaa592c3dbe4ad17abdf59f09b47a2242">DWAPlanner::dist_to_goal_th_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="classDWAPlanner.html#a350b64cf0de51fbe656a09dd579de4f9">edge_on_global_path_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/path&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a87923f18a97dd118ef3176072cb75626">DWAPlanner::edge_on_global_path_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="classDWAPlanner.html#a8483eacf800d05461dc065480e06727e">footprint_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/footprint&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a987b2b726a8c1a1a7963802de728e54e">DWAPlanner::footprint_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classDWAPlanner.html#af2e7c61dc465e5fdc78d2f5e30bf3257">goal_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/move_base_simple/goal&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a68b70a29964590639005a4bbded68778">DWAPlanner::goal_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classDWAPlanner.html#a9f69931d0d6bded376f1fd09b6a5bd80">local_map_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/local_map&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a260998589030cf3ec16e817e23026f0a">DWAPlanner::local_map_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classDWAPlanner.html#a11369ac49bea10466ca789168ea6c71e">odom_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/odom&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a90a0f83317eb1b24bb50ee20fa90f251">DWAPlanner::odom_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classDWAPlanner.html#adbc44965f21a9f550aad4b39effc705e">scan_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/scan&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#af9dcc8b5d0e860ea2d50f753a34a7a36">DWAPlanner::scan_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classDWAPlanner.html#a5d162a39c979fe8024aaa4a2babd3f17">target_velocity_sub_</a> = <a class="code" href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">nh_</a>.subscribe(<span class="stringliteral">&quot;/target_velocity&quot;</span>, 1, &amp;<a class="code" href="classDWAPlanner.html#a671005ef52b7acde226ef9b4c2c3cb3b">DWAPlanner::target_velocity_callback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a0a6a9e24ea11d7a02203a9f2d57a6c2a">use_footprint_</a>)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a> = geometry_msgs::PolygonStamped();</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">use_path_cost_</a>)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a> = nav_msgs::Path();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a27f250fe24e2a4f222fa45e457ac87a9">use_scan_as_input_</a>)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classDWAPlanner.html#a7bc416f6ce1395235566cfd60d7b1770">scan_updated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classDWAPlanner.html#a86c80590b91e97104cfe300ffbd1383c">local_map_updated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1State.html#aa89c6d37950cc88646e2d1c915f343ee">   45</a></span>&#160;<a class="code" href="classDWAPlanner_1_1State.html#aa89c6d37950cc88646e2d1c915f343ee">DWAPlanner::State::State</a>(<span class="keywordtype">void</span>) : x_(0.0), y_(0.0), yaw_(0.0), velocity_(0.0), yawrate_(0.0) {}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1State.html#a598507de1bb7b23fa1246af3a32e285f">   47</a></span>&#160;<a class="code" href="classDWAPlanner_1_1State.html#aa89c6d37950cc88646e2d1c915f343ee">DWAPlanner::State::State</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> x, <span class="keyword">const</span> <span class="keywordtype">double</span> y, <span class="keyword">const</span> <span class="keywordtype">double</span> yaw, <span class="keyword">const</span> <span class="keywordtype">double</span> velocity, <span class="keyword">const</span> <span class="keywordtype">double</span> yawrate)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    : x_(x), y_(y), yaw_(yaw), velocity_(velocity), yawrate_(yawrate)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Window.html#ad308cdb162caaf7e8a749424ee8a81a5">   52</a></span>&#160;<a class="code" href="classDWAPlanner_1_1Window.html#ad308cdb162caaf7e8a749424ee8a81a5">DWAPlanner::Window::Window</a>(<span class="keywordtype">void</span>) : <a class="code" href="classDWAPlanner.html#a9498b7b4e03f58e8286475a0c0f6d2ce">min_velocity_</a>(0.0), <a class="code" href="classDWAPlanner.html#a0a449583ecdfc796e38a3c9b9475da4c">max_velocity_</a>(0.0), <a class="code" href="classDWAPlanner.html#aeb3c7355707de25f99cf71e6c7382625">min_yawrate_</a>(0.0), <a class="code" href="classDWAPlanner.html#a489f2afb286a975b1416e0c356cc3d92">max_yawrate_</a>(0.0) {}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Window.html#ab3957b83074f94c8dfa3fb3a3c59851c">   54</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner_1_1Window.html#ab3957b83074f94c8dfa3fb3a3c59851c">DWAPlanner::Window::show</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;Window:&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tVelocity:&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\t\tmax: &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#a0a449583ecdfc796e38a3c9b9475da4c">max_velocity_</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\t\tmin: &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#a9498b7b4e03f58e8286475a0c0f6d2ce">min_velocity_</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tYawrate:&quot;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\t\tmax: &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#a489f2afb286a975b1416e0c356cc3d92">max_yawrate_</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\t\tmin: &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#aeb3c7355707de25f99cf71e6c7382625">min_yawrate_</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Cost.html#a4c5dc99385cf7d4217c3a51d6cba910e">   65</a></span>&#160;<a class="code" href="classDWAPlanner_1_1Cost.html#a4c5dc99385cf7d4217c3a51d6cba910e">DWAPlanner::Cost::Cost</a>(<span class="keywordtype">void</span>) : obs_cost_(0.0), to_goal_cost_(0.0), speed_cost_(0.0), path_cost_(0.0), total_cost_(0.0)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Cost.html#a6d8f24e8b66f4b9b1cded0d5a8fbdab3">   69</a></span>&#160;<a class="code" href="classDWAPlanner_1_1Cost.html#a4c5dc99385cf7d4217c3a51d6cba910e">DWAPlanner::Cost::Cost</a>(</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> obs_cost, <span class="keyword">const</span> <span class="keywordtype">float</span> to_goal_cost, <span class="keyword">const</span> <span class="keywordtype">float</span> speed_cost, <span class="keyword">const</span> <span class="keywordtype">float</span> path_cost,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> total_cost)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    : obs_cost_(obs_cost), to_goal_cost_(to_goal_cost), speed_cost_(speed_cost), path_cost_(path_cost),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      total_cost_(total_cost)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Cost.html#adc309115613ed2fea5d5f5f5d9e1f2fe">   77</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner_1_1Cost.html#adc309115613ed2fea5d5f5f5d9e1f2fe">DWAPlanner::Cost::show</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;Cost: &quot;</span> &lt;&lt; total_cost_);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tObs cost: &quot;</span> &lt;&lt; obs_cost_);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tGoal cost: &quot;</span> &lt;&lt; to_goal_cost_);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tSpeed cost: &quot;</span> &lt;&lt; speed_cost_);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;\tPath cost: &quot;</span> &lt;&lt; path_cost_);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classDWAPlanner_1_1Cost.html#ab0a513399b6aad6c585e8706d1ba5b71">   86</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner_1_1Cost.html#ab0a513399b6aad6c585e8706d1ba5b71">DWAPlanner::Cost::calc_total_cost</a>(<span class="keywordtype">void</span>) { total_cost_ = obs_cost_ + to_goal_cost_ + speed_cost_ + path_cost_; }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a68b70a29964590639005a4bbded68778">   88</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a68b70a29964590639005a4bbded68778">DWAPlanner::goal_callback</a>(<span class="keyword">const</span> geometry_msgs::PoseStampedConstPtr &amp;msg)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a> = *msg;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value().header.frame_id != <a class="code" href="classDWAPlanner.html#afe2097eedd8de9ce635105c4b34c356e">global_frame_</a>)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="classDWAPlanner.html#ae05204eadd96f3ce82863ce35173c54d">listener_</a>.transformPose(</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;          <a class="code" href="classDWAPlanner.html#afe2097eedd8de9ce635105c4b34c356e">global_frame_</a>, ros::Time(0), <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value(), <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value().header.frame_id, <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value());</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">catch</span> (tf::TransformException ex)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      ROS_ERROR(<span class="stringliteral">&quot;%s&quot;</span>, ex.what());</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#af9dcc8b5d0e860ea2d50f753a34a7a36">  105</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#af9dcc8b5d0e860ea2d50f753a34a7a36">DWAPlanner::scan_callback</a>(<span class="keyword">const</span> sensor_msgs::LaserScanConstPtr &amp;msg)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a27f250fe24e2a4f222fa45e457ac87a9">use_scan_as_input_</a>)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">create_obs_list</a>(*msg);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="classDWAPlanner.html#acc2706026b1ce2a7d83b2a33ef201145">scan_not_subscribe_count_</a> = 0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classDWAPlanner.html#a7bc416f6ce1395235566cfd60d7b1770">scan_updated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a260998589030cf3ec16e817e23026f0a">  113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a260998589030cf3ec16e817e23026f0a">DWAPlanner::local_map_callback</a>(<span class="keyword">const</span> nav_msgs::OccupancyGridConstPtr &amp;msg)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a27f250fe24e2a4f222fa45e457ac87a9">use_scan_as_input_</a>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">create_obs_list</a>(*msg);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classDWAPlanner.html#a0eb2324a258632fd2a8cb7a02bbdb703">local_map_not_subscribe_count_</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classDWAPlanner.html#a86c80590b91e97104cfe300ffbd1383c">local_map_updated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a90a0f83317eb1b24bb50ee20fa90f251">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a90a0f83317eb1b24bb50ee20fa90f251">DWAPlanner::odom_callback</a>(<span class="keyword">const</span> nav_msgs::OdometryConstPtr &amp;msg)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">current_cmd_vel_</a> = msg-&gt;twist.twist;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="classDWAPlanner.html#a75f2b749625d62475f12f68c1ba86703">odom_not_subscribe_count_</a> = 0;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="classDWAPlanner.html#a533327c9fae4aceb07a959958b24dd75">odom_updated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a671005ef52b7acde226ef9b4c2c3cb3b">  128</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a671005ef52b7acde226ef9b4c2c3cb3b">DWAPlanner::target_velocity_callback</a>(<span class="keyword">const</span> geometry_msgs::TwistConstPtr &amp;msg)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classDWAPlanner.html#aa138c408a334a2e07955e405cc9042d7">target_velocity_</a> = std::min(msg-&gt;linear.x, <a class="code" href="classDWAPlanner.html#a0a449583ecdfc796e38a3c9b9475da4c">max_velocity_</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  ROS_INFO_STREAM_THROTTLE(1.0, <span class="stringliteral">&quot;target velocity was updated to &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#aa138c408a334a2e07955e405cc9042d7">target_velocity_</a> &lt;&lt; <span class="stringliteral">&quot; [m/s]&quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a987b2b726a8c1a1a7963802de728e54e">  134</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a987b2b726a8c1a1a7963802de728e54e">DWAPlanner::footprint_callback</a>(<span class="keyword">const</span> geometry_msgs::PolygonStampedPtr &amp;msg)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a> = *msg;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;point : <a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a>.value().polygon.points)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    point.x += point.x &lt; 0 ? -<a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a> : <a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    point.y += point.y &lt; 0 ? -<a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a> : <a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#aaa592c3dbe4ad17abdf59f09b47a2242">  144</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#aaa592c3dbe4ad17abdf59f09b47a2242">DWAPlanner::dist_to_goal_th_callback</a>(<span class="keyword">const</span> std_msgs::Float64ConstPtr &amp;msg)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="classDWAPlanner.html#a1a8deecdb6e6d4bcb0a953bbfb6cf436">dist_to_goal_th_</a> = msg-&gt;data;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  ROS_INFO_STREAM_THROTTLE(1.0, <span class="stringliteral">&quot;distance to goal threshold was updated to &quot;</span> &lt;&lt; <a class="code" href="classDWAPlanner.html#a1a8deecdb6e6d4bcb0a953bbfb6cf436">dist_to_goal_th_</a> &lt;&lt; <span class="stringliteral">&quot; [m]&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a87923f18a97dd118ef3176072cb75626">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a87923f18a97dd118ef3176072cb75626">DWAPlanner::edge_on_global_path_callback</a>(<span class="keyword">const</span> nav_msgs::PathConstPtr &amp;msg)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">use_path_cost_</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a> = *msg;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">try</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pose : <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a>.value().poses)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="classDWAPlanner.html#ae05204eadd96f3ce82863ce35173c54d">listener_</a>.transformPose(<a class="code" href="classDWAPlanner.html#aba89ca88e42c4401e1391db53b4d2b8a">robot_frame_</a>, ros::Time(0), pose, msg-&gt;header.frame_id, pose);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">catch</span> (tf::TransformException ex)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    ROS_ERROR(<span class="stringliteral">&quot;%s&quot;</span>, ex.what());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;std::vector&lt;DWAPlanner::State&gt;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a2174dc1fa664acb76368808bdb2fe179">  167</a></span>&#160;<a class="code" href="classDWAPlanner.html#a2174dc1fa664acb76368808bdb2fe179">DWAPlanner::dwa_planning</a>(<span class="keyword">const</span> Eigen::Vector3d &amp;goal, std::vector&lt;std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt;&gt; &amp;trajectories)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classDWAPlanner_1_1Cost.html">Cost</a> min_cost(0.0, 0.0, 0.0, 0.0, 1e6);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1Window.html">Window</a> dynamic_window = <a class="code" href="classDWAPlanner.html#aee78d648c4143bbb16320b8cb4913753">calc_dynamic_window</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  std::vector&lt;State&gt; best_traj;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  best_traj.resize(<a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  std::vector&lt;Cost&gt; costs;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> costs_size = <a class="code" href="classDWAPlanner.html#aae7d1c62cfbe78b2d842775ed59947f6">velocity_samples_</a> * (<a class="code" href="classDWAPlanner.html#ac6b9c096dbcb9a93b035e8126f560aee">yawrate_samples_</a> + 1);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  costs.reserve(costs_size);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> velocity_resolution =</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      std::max((dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#ac6ba1f416961bc4d90d9afc2346d7457">max_velocity_</a> - dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#a6fc166d61dc10063b7c2bab93f263a8a">min_velocity_</a>) / (<a class="code" href="classDWAPlanner.html#aae7d1c62cfbe78b2d842775ed59947f6">velocity_samples_</a> - 1), DBL_EPSILON);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> yawrate_resolution =</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      std::max((dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#a3aeb6f0ec9378876527d1dd9b4bff57b">max_yawrate_</a> - dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#ad9d72c1a09fac5f634709f98f2df61b8">min_yawrate_</a>) / (<a class="code" href="classDWAPlanner.html#ac6b9c096dbcb9a93b035e8126f560aee">yawrate_samples_</a> - 1), DBL_EPSILON);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">int</span> available_traj_count = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDWAPlanner.html#aae7d1c62cfbe78b2d842775ed59947f6">velocity_samples_</a>; i++)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> v = dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#a6fc166d61dc10063b7c2bab93f263a8a">min_velocity_</a> + velocity_resolution * i;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classDWAPlanner.html#ac6b9c096dbcb9a93b035e8126f560aee">yawrate_samples_</a>; j++)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt; traj;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordtype">double</span> y = dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#ad9d72c1a09fac5f634709f98f2df61b8">min_yawrate_</a> + yawrate_resolution * j;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (v &lt; <a class="code" href="classDWAPlanner.html#a69508170a18753d06dec87f99c59eb6e">slow_velocity_th_</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        y = y &gt; 0 ? std::max(y, <a class="code" href="classDWAPlanner.html#aeb3c7355707de25f99cf71e6c7382625">min_yawrate_</a>) : std::min(y, -<a class="code" href="classDWAPlanner.html#aeb3c7355707de25f99cf71e6c7382625">min_yawrate_</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      traj.first = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(v, y);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1Cost.html">Cost</a> cost = <a class="code" href="classDWAPlanner.html#adb0934bf6918c7af1a6b846a1d6cfd8a">evaluate_trajectory</a>(traj.first, goal);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      costs.push_back(cost);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> == 1e6)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        traj.second = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        traj.second = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        available_traj_count++;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      trajectories.push_back(traj);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#ad9d72c1a09fac5f634709f98f2df61b8">min_yawrate_</a> &lt; 0.0 &amp;&amp; 0.0 &lt; dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#a3aeb6f0ec9378876527d1dd9b4bff57b">max_yawrate_</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt; traj;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      traj.first = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(v, 0.0);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1Cost.html">Cost</a> cost = <a class="code" href="classDWAPlanner.html#adb0934bf6918c7af1a6b846a1d6cfd8a">evaluate_trajectory</a>(traj.first, goal);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      costs.push_back(cost);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> == 1e6)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        traj.second = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        traj.second = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        available_traj_count++;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      trajectories.push_back(traj);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (available_traj_count == 0)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    ROS_ERROR_THROTTLE(1.0, <span class="stringliteral">&quot;No available trajectory&quot;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    best_traj = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(0.0, 0.0);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="classDWAPlanner.html#aae53f07597841281fe61f4448c12c6dc">normalize_costs</a>(costs);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; costs.size(); i++)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (costs[i].obs_cost_ != 1e6)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        costs[i].to_goal_cost_ *= <a class="code" href="classDWAPlanner.html#a43f627b7c35d4e16e1ee80067daae75b">to_goal_cost_gain_</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        costs[i].obs_cost_ *= <a class="code" href="classDWAPlanner.html#a6b0fc2a356d9c3c89863533b1e81091f">obs_cost_gain_</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        costs[i].speed_cost_ *= <a class="code" href="classDWAPlanner.html#a2151c7a05e2111ec1cf0c501b265a493">speed_cost_gain_</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        costs[i].path_cost_ *= <a class="code" href="classDWAPlanner.html#a6f4ad39dc3067623588dc8f58088e497">path_cost_gain_</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        costs[i].calc_total_cost();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span> (costs[i].total_cost_ &lt; min_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a88ad9123fd6a216dda6f6620d2eb6f18">total_cost_</a>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          min_cost = costs[i];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          best_traj = trajectories[i].first;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  ROS_INFO(<span class="stringliteral">&quot;===&quot;</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;(v, y) = (&quot;</span> &lt;&lt; best_traj.front().velocity_ &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; best_traj.front().yawrate_ &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  min_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#adc309115613ed2fea5d5f5f5d9e1f2fe">show</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  ROS_INFO_STREAM(<span class="stringliteral">&quot;num of trajectories available: &quot;</span> &lt;&lt; available_traj_count &lt;&lt; <span class="stringliteral">&quot; of &quot;</span> &lt;&lt; trajectories.size());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  ROS_INFO(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">return</span> best_traj;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#aae53f07597841281fe61f4448c12c6dc">  261</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#aae53f07597841281fe61f4448c12c6dc">DWAPlanner::normalize_costs</a>(std::vector&lt;DWAPlanner::Cost&gt; &amp;costs)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classDWAPlanner_1_1Cost.html">Cost</a> min_cost(1e6, 1e6, 1e6, 1e6, 1e6), max_cost;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;cost : costs)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (cost.obs_cost_ != 1e6)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      min_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> = std::min(min_cost.obs_cost_, cost.obs_cost_);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> = std::max(max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a>, cost.obs_cost_);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      min_cost.to_goal_cost_ = std::min(min_cost.to_goal_cost_, cost.to_goal_cost_);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#afa0078eb743592e0218455cafe5686f9">to_goal_cost_</a> = std::max(max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#afa0078eb743592e0218455cafe5686f9">to_goal_cost_</a>, cost.to_goal_cost_);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">use_speed_cost_</a>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        min_cost.speed_cost_ = std::min(min_cost.speed_cost_, cost.speed_cost_);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a8216a1c20408c93b363ec189b56f5962">speed_cost_</a> = std::max(max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a8216a1c20408c93b363ec189b56f5962">speed_cost_</a>, cost.speed_cost_);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">use_path_cost_</a>)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        min_cost.path_cost_ = std::min(min_cost.path_cost_, cost.path_cost_);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a764332378cf66639480771a9eb7713ac">path_cost_</a> = std::max(max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a764332378cf66639480771a9eb7713ac">path_cost_</a>, cost.path_cost_);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;cost : costs)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (cost.obs_cost_ != 1e6)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      cost.obs_cost_ = (cost.obs_cost_ - min_cost.obs_cost_) / (max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> - min_cost.obs_cost_ + DBL_EPSILON);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      cost.to_goal_cost_ = (cost.to_goal_cost_ - min_cost.to_goal_cost_) /</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                           (max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#afa0078eb743592e0218455cafe5686f9">to_goal_cost_</a> - min_cost.to_goal_cost_ + DBL_EPSILON);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">use_speed_cost_</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        cost.speed_cost_ =</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            (cost.speed_cost_ - min_cost.speed_cost_) / (max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a8216a1c20408c93b363ec189b56f5962">speed_cost_</a> - min_cost.speed_cost_ + DBL_EPSILON);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">use_path_cost_</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        cost.path_cost_ =</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            (cost.path_cost_ - min_cost.path_cost_) / (max_cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a764332378cf66639480771a9eb7713ac">path_cost_</a> - min_cost.path_cost_ + DBL_EPSILON);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ac63a462c7660f12c9c6ac79b6717e7c4">  303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#ac63a462c7660f12c9c6ac79b6717e7c4">DWAPlanner::process</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  ros::Rate loop_rate(<a class="code" href="classDWAPlanner.html#a6b737a7173a88d329229c4f6c032b469">hz_</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">while</span> (ros::ok())</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    geometry_msgs::Twist cmd_vel;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#ad481084566fe0bb82f732a8a8dbffe93">can_move</a>())</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      cmd_vel = <a class="code" href="classDWAPlanner.html#ab601045c87c8925652ec423dd5c46062">calc_cmd_vel</a>();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classDWAPlanner.html#a87a87a7fe7eb6f6b279af965da562d6f">velocity_pub_</a>.publish(cmd_vel);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classDWAPlanner.html#a655d7e12cbe359f26dfcf5b52e7a6b33">finish_flag_pub_</a>.publish(<a class="code" href="classDWAPlanner.html#a461198b6316c4b8d007957dff80008b2">has_finished_</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a461198b6316c4b8d007957dff80008b2">has_finished_</a>.data)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      ros::Duration(<a class="code" href="classDWAPlanner.html#a0673ca747da2b9d898408bf3f6b1ef35">sleep_time_after_finish_</a>).sleep();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a27f250fe24e2a4f222fa45e457ac87a9">use_scan_as_input_</a>)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="classDWAPlanner.html#a7bc416f6ce1395235566cfd60d7b1770">scan_updated_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <a class="code" href="classDWAPlanner.html#a86c80590b91e97104cfe300ffbd1383c">local_map_updated_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classDWAPlanner.html#a533327c9fae4aceb07a959958b24dd75">odom_updated_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classDWAPlanner.html#a461198b6316c4b8d007957dff80008b2">has_finished_</a>.data = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    ros::spinOnce();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    loop_rate.sleep();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ad481084566fe0bb82f732a8a8dbffe93">  328</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDWAPlanner.html#ad481084566fe0bb82f732a8a8dbffe93">DWAPlanner::can_move</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a>.has_value())</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Robot Footprint has not been updated&quot;</span>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.has_value())</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Local goal has not been updated&quot;</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a>.has_value())</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Edge on global path has not been updated&quot;</span>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a> &lt; <a class="code" href="classDWAPlanner.html#a75f2b749625d62475f12f68c1ba86703">odom_not_subscribe_count_</a>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Odom has not been updated&quot;</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a> &lt; <a class="code" href="classDWAPlanner.html#a0eb2324a258632fd2a8cb7a02bbdb703">local_map_not_subscribe_count_</a>)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Local map has not been updated&quot;</span>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a> &lt; <a class="code" href="classDWAPlanner.html#acc2706026b1ce2a7d83b2a33ef201145">scan_not_subscribe_count_</a>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    ROS_WARN_THROTTLE(1.0, <span class="stringliteral">&quot;Scan has not been updated&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a533327c9fae4aceb07a959958b24dd75">odom_updated_</a>)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="classDWAPlanner.html#a75f2b749625d62475f12f68c1ba86703">odom_not_subscribe_count_</a>++;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a86c80590b91e97104cfe300ffbd1383c">local_map_updated_</a>)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classDWAPlanner.html#a0eb2324a258632fd2a8cb7a02bbdb703">local_map_not_subscribe_count_</a>++;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a7bc416f6ce1395235566cfd60d7b1770">scan_updated_</a>)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="classDWAPlanner.html#acc2706026b1ce2a7d83b2a33ef201145">scan_not_subscribe_count_</a>++;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a>.has_value() &amp;&amp; <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.has_value() &amp;&amp; <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a>.has_value() &amp;&amp;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="classDWAPlanner.html#a75f2b749625d62475f12f68c1ba86703">odom_not_subscribe_count_</a> &lt;= <a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a> &amp;&amp; <a class="code" href="classDWAPlanner.html#a0eb2324a258632fd2a8cb7a02bbdb703">local_map_not_subscribe_count_</a> &lt;= <a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a> &amp;&amp;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="classDWAPlanner.html#acc2706026b1ce2a7d83b2a33ef201145">scan_not_subscribe_count_</a> &lt;= <a class="code" href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">subscribe_count_th_</a>)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ab601045c87c8925652ec423dd5c46062">  358</a></span>&#160;geometry_msgs::Twist <a class="code" href="classDWAPlanner.html#ab601045c87c8925652ec423dd5c46062">DWAPlanner::calc_cmd_vel</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  geometry_msgs::Twist cmd_vel;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt; best_traj;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  std::vector&lt;std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt;&gt; trajectories;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> trajectories_size = <a class="code" href="classDWAPlanner.html#aae7d1c62cfbe78b2d842775ed59947f6">velocity_samples_</a> * (<a class="code" href="classDWAPlanner.html#ac6b9c096dbcb9a93b035e8126f560aee">yawrate_samples_</a> + 1);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  trajectories.reserve(trajectories_size);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  geometry_msgs::PoseStamped goal_;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">try</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="classDWAPlanner.html#ae05204eadd96f3ce82863ce35173c54d">listener_</a>.transformPose(<a class="code" href="classDWAPlanner.html#aba89ca88e42c4401e1391db53b4d2b8a">robot_frame_</a>, ros::Time(0), <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value(), <a class="code" href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">goal_msg_</a>.value().header.frame_id, goal_);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">catch</span> (tf::TransformException ex)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    ROS_ERROR(<span class="stringliteral">&quot;%s&quot;</span>, ex.what());</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d goal(goal_.pose.position.x, goal_.pose.position.y, tf::getYaw(goal_.pose.orientation));</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> angle_to_goal = atan2(goal.y(), goal.x());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> (M_PI / 4.0 &lt; fabs(angle_to_goal))</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">use_speed_cost_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a1a8deecdb6e6d4bcb0a953bbfb6cf436">dist_to_goal_th_</a> &lt; goal.segment(0, 2).norm() &amp;&amp; !<a class="code" href="classDWAPlanner.html#a9c3faf43ce5629b5468141c47f637461">has_reached_</a>)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a12cabee5b51e8efaded6796d0b4ba84b">can_adjust_robot_direction</a>(goal))</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      cmd_vel.angular.z = angle_to_goal &gt; 0 ? std::min(angle_to_goal, <a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                            : std::max(angle_to_goal, -<a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      cmd_vel.angular.z = cmd_vel.angular.z &gt; 0 ? std::max(cmd_vel.angular.z, <a class="code" href="classDWAPlanner.html#a07bcd1c208c69b7c2e421f52199c1939">min_in_place_yawrate_</a>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                                : std::min(cmd_vel.angular.z, -<a class="code" href="classDWAPlanner.html#a07bcd1c208c69b7c2e421f52199c1939">min_in_place_yawrate_</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      best_traj.first = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(cmd_vel.angular.z, goal);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      trajectories.push_back(best_traj);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      best_traj.first = <a class="code" href="classDWAPlanner.html#a2174dc1fa664acb76368808bdb2fe179">dwa_planning</a>(goal, trajectories);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      cmd_vel.linear.x = best_traj.first.front().velocity_;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      cmd_vel.angular.z = best_traj.first.front().yawrate_;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="classDWAPlanner.html#a9c3faf43ce5629b5468141c47f637461">has_reached_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a3c3b2296c51126e0d12557566ace0453">turn_direction_th_</a> &lt; fabs(goal[2]))</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      cmd_vel.angular.z =</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          goal[2] &gt; 0 ? std::min(goal[2], <a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>) : std::max(goal[2], -<a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      cmd_vel.angular.z = cmd_vel.angular.z &gt; 0 ? std::max(cmd_vel.angular.z, <a class="code" href="classDWAPlanner.html#a07bcd1c208c69b7c2e421f52199c1939">min_in_place_yawrate_</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                                : std::min(cmd_vel.angular.z, -<a class="code" href="classDWAPlanner.html#a07bcd1c208c69b7c2e421f52199c1939">min_in_place_yawrate_</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="classDWAPlanner.html#a461198b6316c4b8d007957dff80008b2">has_finished_</a>.data = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="classDWAPlanner.html#a9c3faf43ce5629b5468141c47f637461">has_reached_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    best_traj.first = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(cmd_vel.linear.x, cmd_vel.angular.z);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    trajectories.push_back(best_traj);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; trajectories_size; i++)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    trajectories.push_back(trajectories.front());</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classDWAPlanner.html#a8d103793791af71de914b43e7b8a5134">visualize_trajectory</a>(best_traj.first, <a class="code" href="classDWAPlanner.html#ac0032d860e85f03c309168f6e557e39f">selected_trajectory_pub_</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classDWAPlanner.html#af398e6211e5543357af9b72ea84f40a8">visualize_trajectories</a>(trajectories, <a class="code" href="classDWAPlanner.html#a05cec7ce1a8d75286d3c2a757bb7fd40">candidate_trajectories_pub_</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <a class="code" href="classDWAPlanner.html#a8d03036507e7ab8b5187e9a8f0038316">visualize_footprints</a>(best_traj.first, <a class="code" href="classDWAPlanner.html#a966a8178627cee9001f042a07d934aec">predict_footprints_pub_</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">use_speed_cost_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> cmd_vel;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a12cabee5b51e8efaded6796d0b4ba84b">  430</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDWAPlanner.html#a12cabee5b51e8efaded6796d0b4ba84b">DWAPlanner::can_adjust_robot_direction</a>(<span class="keyword">const</span> Eigen::Vector3d &amp;goal)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> angle_to_goal = atan2(goal.y(), goal.x());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (fabs(angle_to_goal) &lt; <a class="code" href="classDWAPlanner.html#a50de685d9878e76a3c5143fbda4c66a1">angle_to_goal_th_</a>)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> yawrate = std::min(std::max(angle_to_goal, -<a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>), <a class="code" href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">max_in_place_yawrate_</a>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  std::vector&lt;State&gt; traj = <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">generate_trajectory</a>(yawrate, goal);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a2821527877be42becc37cc9a867d3528">check_collision</a>(traj))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a2821527877be42becc37cc9a867d3528">  445</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDWAPlanner.html#a2821527877be42becc37cc9a867d3528">DWAPlanner::check_collision</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;traj)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#a0a6a9e24ea11d7a02203a9f2d57a6c2a">use_footprint_</a>)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;state : traj)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;obs : <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keyword">const</span> geometry_msgs::PolygonStamped footprint = <a class="code" href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">move_footprint</a>(state);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a5f5a93a9a3e3534ace921095d813e6d9">is_inside_of_robot</a>(obs.position, footprint, state))</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#aee78d648c4143bbb16320b8cb4913753">  463</a></span>&#160;<a class="code" href="classDWAPlanner_1_1Window.html">DWAPlanner::Window</a> <a class="code" href="classDWAPlanner.html#aee78d648c4143bbb16320b8cb4913753">DWAPlanner::calc_dynamic_window</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="classDWAPlanner_1_1Window.html">Window</a> window;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  window.<a class="code" href="classDWAPlanner_1_1Window.html#a6fc166d61dc10063b7c2bab93f263a8a">min_velocity_</a> = std::max((<a class="code" href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">current_cmd_vel_</a>.linear.x - <a class="code" href="classDWAPlanner.html#abff251f2fbf87c65af5da3937ec475bb">max_deceleration_</a> * <a class="code" href="classDWAPlanner.html#a8de4fbc9efa1a16b62e2771c195042b8">sim_period_</a>), <a class="code" href="classDWAPlanner.html#a9498b7b4e03f58e8286475a0c0f6d2ce">min_velocity_</a>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  window.<a class="code" href="classDWAPlanner_1_1Window.html#ac6ba1f416961bc4d90d9afc2346d7457">max_velocity_</a> = std::min((<a class="code" href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">current_cmd_vel_</a>.linear.x + <a class="code" href="classDWAPlanner.html#ae44b49bc033ac28871f35634ced91e82">max_acceleration_</a> * <a class="code" href="classDWAPlanner.html#a8de4fbc9efa1a16b62e2771c195042b8">sim_period_</a>), <a class="code" href="classDWAPlanner.html#aa138c408a334a2e07955e405cc9042d7">target_velocity_</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  window.<a class="code" href="classDWAPlanner_1_1Window.html#ad9d72c1a09fac5f634709f98f2df61b8">min_yawrate_</a> = std::max((<a class="code" href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">current_cmd_vel_</a>.angular.z - <a class="code" href="classDWAPlanner.html#abc0f00d95e9643456d4be61322c7ed30">max_d_yawrate_</a> * <a class="code" href="classDWAPlanner.html#a8de4fbc9efa1a16b62e2771c195042b8">sim_period_</a>), -<a class="code" href="classDWAPlanner.html#a489f2afb286a975b1416e0c356cc3d92">max_yawrate_</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  window.<a class="code" href="classDWAPlanner_1_1Window.html#a3aeb6f0ec9378876527d1dd9b4bff57b">max_yawrate_</a> = std::min((<a class="code" href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">current_cmd_vel_</a>.angular.z + <a class="code" href="classDWAPlanner.html#abc0f00d95e9643456d4be61322c7ed30">max_d_yawrate_</a> * <a class="code" href="classDWAPlanner.html#a8de4fbc9efa1a16b62e2771c195042b8">sim_period_</a>), <a class="code" href="classDWAPlanner.html#a489f2afb286a975b1416e0c356cc3d92">max_yawrate_</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">return</span> window;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a93309a99fd864dafa45f6b7390d781c3">  473</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#a93309a99fd864dafa45f6b7390d781c3">DWAPlanner::calc_to_goal_cost</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;traj, <span class="keyword">const</span> Eigen::Vector3d &amp;goal)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  Eigen::Vector3d last_position(traj.back().x_, traj.back().y_, traj.back().yaw_);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">return</span> (last_position.segment(0, 2) - goal.segment(0, 2)).norm();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a51b0f44c576d7d75b64a66733bf0e959">  479</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#a51b0f44c576d7d75b64a66733bf0e959">DWAPlanner::calc_obs_cost</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;traj)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordtype">float</span> min_dist = <a class="code" href="classDWAPlanner.html#abfa3ac6593ebdea54223da288841b1ca">obs_range_</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;state : traj)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;obs : <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordtype">float</span> dist;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a0a6a9e24ea11d7a02203a9f2d57a6c2a">use_footprint_</a>)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        dist = <a class="code" href="classDWAPlanner.html#a840a031c8d25484bcab244edb39c97d5">calc_dist_from_robot</a>(obs.position, state);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        dist = hypot((state.x_ - obs.position.x), (state.y_ - obs.position.y)) - <a class="code" href="classDWAPlanner.html#ab42a379ef62d72d9b23ff1de6c9416bd">robot_radius_</a> - <a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">if</span> (dist &lt; DBL_EPSILON)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">return</span> 1e6;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      min_dist = std::min(min_dist, dist);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classDWAPlanner.html#abfa3ac6593ebdea54223da288841b1ca">obs_range_</a> - min_dist;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ac9a0ab8e147e8d8aaa752071d410d2dc">  500</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#ac9a0ab8e147e8d8aaa752071d410d2dc">DWAPlanner::calc_speed_cost</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;traj)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">use_speed_cost_</a>)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1Window.html">Window</a> dynamic_window = <a class="code" href="classDWAPlanner.html#aee78d648c4143bbb16320b8cb4913753">calc_dynamic_window</a>();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">return</span> dynamic_window.<a class="code" href="classDWAPlanner_1_1Window.html#ac6ba1f416961bc4d90d9afc2346d7457">max_velocity_</a> - traj.front().velocity_;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ad828f8cf5e3705c42fe494dbf0927e1a">  508</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#ad828f8cf5e3705c42fe494dbf0927e1a">DWAPlanner::calc_path_cost</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;traj)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">use_path_cost_</a>)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classDWAPlanner.html#aa8947f7df5a12a7f2ad844b8be1cb046">calc_dist_to_path</a>(traj.back());</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#aa8947f7df5a12a7f2ad844b8be1cb046">  516</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#aa8947f7df5a12a7f2ad844b8be1cb046">DWAPlanner::calc_dist_to_path</a>(<span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1State.html">State</a> state)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  geometry_msgs::Point edge_point1 = <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a>.value().poses.front().pose.position;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  geometry_msgs::Point edge_point2 = <a class="code" href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">edge_points_on_path_</a>.value().poses.back().pose.position;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> a = edge_point2.y - edge_point1.y;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> b = -(edge_point2.x - edge_point1.x);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> c = -a * edge_point1.x - b * edge_point1.y;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">return</span> fabs(a * state.<a class="code" href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">x_</a> + b * state.<a class="code" href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">y_</a> + c) / (hypot(a, b) + DBL_EPSILON);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">  527</a></span>&#160;std::vector&lt;DWAPlanner::State&gt; <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">DWAPlanner::generate_trajectory</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> velocity, <span class="keyword">const</span> <span class="keywordtype">double</span> yawrate)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;{</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  std::vector&lt;State&gt; trajectory;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  trajectory.resize(<a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="classDWAPlanner_1_1State.html">State</a> state;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>; i++)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classDWAPlanner.html#a320e7e8181cad788c41ce82b5fbd96ce">motion</a>(state, velocity, yawrate);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    trajectory[i] = state;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">return</span> trajectory;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a3288c4eae26ab3219168a471f4e5d754">  540</a></span>&#160;std::vector&lt;DWAPlanner::State&gt; <a class="code" href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">DWAPlanner::generate_trajectory</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> yawrate, <span class="keyword">const</span> Eigen::Vector3d &amp;goal)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> target_direction = atan2(goal.y(), goal.x()) &gt; 0 ? <a class="code" href="classDWAPlanner.html#a153ce2ec57ab3365fd9f17d7f5395853">sim_direction_</a> : -<a class="code" href="classDWAPlanner.html#a153ce2ec57ab3365fd9f17d7f5395853">sim_direction_</a>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> predict_time = target_direction / (yawrate + DBL_EPSILON);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  std::vector&lt;State&gt; trajectory;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  trajectory.resize(<a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classDWAPlanner_1_1State.html">State</a> state;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>; i++)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="classDWAPlanner.html#a320e7e8181cad788c41ce82b5fbd96ce">motion</a>(state, 0.0, yawrate);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    trajectory[i] = state;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">return</span> trajectory;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#adb0934bf6918c7af1a6b846a1d6cfd8a">  555</a></span>&#160;<a class="code" href="classDWAPlanner_1_1Cost.html">DWAPlanner::Cost</a> <a class="code" href="classDWAPlanner.html#adb0934bf6918c7af1a6b846a1d6cfd8a">DWAPlanner::evaluate_trajectory</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;trajectory, <span class="keyword">const</span> Eigen::Vector3d &amp;goal)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classDWAPlanner_1_1Cost.html">Cost</a> cost;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  cost.<a class="code" href="classDWAPlanner_1_1Cost.html#afa0078eb743592e0218455cafe5686f9">to_goal_cost_</a> = <a class="code" href="classDWAPlanner.html#a93309a99fd864dafa45f6b7390d781c3">calc_to_goal_cost</a>(trajectory, goal);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  cost.<a class="code" href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">obs_cost_</a> = <a class="code" href="classDWAPlanner.html#a51b0f44c576d7d75b64a66733bf0e959">calc_obs_cost</a>(trajectory);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a8216a1c20408c93b363ec189b56f5962">speed_cost_</a> = <a class="code" href="classDWAPlanner.html#ac9a0ab8e147e8d8aaa752071d410d2dc">calc_speed_cost</a>(trajectory);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  cost.<a class="code" href="classDWAPlanner_1_1Cost.html#a764332378cf66639480771a9eb7713ac">path_cost_</a> = <a class="code" href="classDWAPlanner.html#ad828f8cf5e3705c42fe494dbf0927e1a">calc_path_cost</a>(trajectory);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  cost.<a class="code" href="classDWAPlanner_1_1Cost.html#ab0a513399b6aad6c585e8706d1ba5b71">calc_total_cost</a>();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">return</span> cost;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a2639f54e669e23a5022be9441fee3bf3">  566</a></span>&#160;geometry_msgs::Point <a class="code" href="classDWAPlanner.html#a2639f54e669e23a5022be9441fee3bf3">DWAPlanner::calc_intersection</a>(</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keyword">const</span> geometry_msgs::Point &amp;obstacle, <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1State.html">State</a> &amp;state, geometry_msgs::PolygonStamped footprint)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;{</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; footprint.polygon.points.size(); i++)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keyword">const</span> Eigen::Vector3d vector_A(obstacle.x, obstacle.y, 0.0);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keyword">const</span> Eigen::Vector3d vector_B(state.<a class="code" href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">x_</a>, state.<a class="code" href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">y_</a>, 0.0);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keyword">const</span> Eigen::Vector3d vector_C(footprint.polygon.points[i].x, footprint.polygon.points[i].y, 0.0);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    Eigen::Vector3d vector_D(0.0, 0.0, 0.0);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (i != footprint.polygon.points.size() - 1)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      vector_D &lt;&lt; footprint.polygon.points[i + 1].x, footprint.polygon.points[i + 1].y, 0.0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      vector_D &lt;&lt; footprint.polygon.points[0].x, footprint.polygon.points[0].y, 0.0;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> deno = (vector_B - vector_A).cross(vector_D - vector_C).z();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> s = (vector_C - vector_A).cross(vector_D - vector_C).z() / deno;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> t = (vector_B - vector_A).cross(vector_A - vector_C).z() / deno;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    geometry_msgs::Point point;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    point.x = vector_A.x() + s * (vector_B - vector_A).x();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    point.y = vector_A.y() + s * (vector_B - vector_A).y();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// cross</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (!(s &lt; 0.0 || 1.0 &lt; s || t &lt; 0.0 || 1.0 &lt; t))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> point;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  geometry_msgs::Point point;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  point.x = 1e6;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  point.y = 1e6;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">return</span> point;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a840a031c8d25484bcab244edb39c97d5">  599</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classDWAPlanner.html#a840a031c8d25484bcab244edb39c97d5">DWAPlanner::calc_dist_from_robot</a>(<span class="keyword">const</span> geometry_msgs::Point &amp;obstacle, <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1State.html">State</a> &amp;state)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keyword">const</span> geometry_msgs::PolygonStamped footprint = <a class="code" href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">move_footprint</a>(state);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a5f5a93a9a3e3534ace921095d813e6d9">is_inside_of_robot</a>(obstacle, footprint, state))</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    geometry_msgs::Point intersection = <a class="code" href="classDWAPlanner.html#a2639f54e669e23a5022be9441fee3bf3">calc_intersection</a>(obstacle, state, footprint);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">return</span> hypot((obstacle.x - intersection.x), (obstacle.y - intersection.y));</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">  613</a></span>&#160;geometry_msgs::PolygonStamped <a class="code" href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">DWAPlanner::move_footprint</a>(<span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1State.html">State</a> &amp;target_pose)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  geometry_msgs::PolygonStamped footprint;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#a0a6a9e24ea11d7a02203a9f2d57a6c2a">use_footprint_</a>)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    footprint = <a class="code" href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">footprint_</a>.value();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> plot_num = 20;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; plot_num; i++)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      geometry_msgs::Point32 point;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      point.x = (<a class="code" href="classDWAPlanner.html#ab42a379ef62d72d9b23ff1de6c9416bd">robot_radius_</a> + <a class="code" href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">footprint_padding_</a>) * cos(2 * M_PI * i / plot_num);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      point.y = <a class="code" href="classDWAPlanner.html#ab42a379ef62d72d9b23ff1de6c9416bd">robot_radius_</a> * sin(2 * M_PI * i / plot_num);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      footprint.polygon.points.push_back(point);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  footprint.header.stamp = ros::Time::now();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;point : footprint.polygon.points)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    Eigen::VectorXf point_in(2);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    point_in &lt;&lt; point.x, point.y;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    Eigen::Matrix2f rot;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    rot = Eigen::Rotation2Df(target_pose.<a class="code" href="classDWAPlanner_1_1State.html#a878214bada81b2ee685b590f0417aaa2">yaw_</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">const</span> Eigen::VectorXf point_out = rot * point_in;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    point.x = point_out.x() + target_pose.<a class="code" href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">x_</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    point.y = point_out.y() + target_pose.<a class="code" href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">y_</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">return</span> footprint;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a5f5a93a9a3e3534ace921095d813e6d9">  649</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDWAPlanner.html#a5f5a93a9a3e3534ace921095d813e6d9">DWAPlanner::is_inside_of_robot</a>(</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keyword">const</span> geometry_msgs::Point &amp;obstacle, <span class="keyword">const</span> geometry_msgs::PolygonStamped &amp;footprint, <span class="keyword">const</span> <a class="code" href="classDWAPlanner_1_1State.html">State</a> &amp;state)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  geometry_msgs::Point32 state_point;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  state_point.x = state.<a class="code" href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">x_</a>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  state_point.y = state.<a class="code" href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">y_</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; footprint.polygon.points.size(); i++)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    geometry_msgs::Polygon triangle;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    triangle.points.push_back(state_point);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    triangle.points.push_back(footprint.polygon.points[i]);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (i != footprint.polygon.points.size() - 1)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      triangle.points.push_back(footprint.polygon.points[i + 1]);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      triangle.points.push_back(footprint.polygon.points[0]);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classDWAPlanner.html#aacd71717ea2fa4a6c2d8a9eec186e189">is_inside_of_triangle</a>(obstacle, triangle))</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#aacd71717ea2fa4a6c2d8a9eec186e189">  674</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDWAPlanner.html#aacd71717ea2fa4a6c2d8a9eec186e189">DWAPlanner::is_inside_of_triangle</a>(<span class="keyword">const</span> geometry_msgs::Point &amp;target_point, <span class="keyword">const</span> geometry_msgs::Polygon &amp;triangle)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;{</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (triangle.points.size() != 3)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    ROS_ERROR(<span class="stringliteral">&quot;Not triangle&quot;</span>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    exit(1);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_A(triangle.points[0].x, triangle.points[0].y, 0.0);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_B(triangle.points[1].x, triangle.points[1].y, 0.0);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_C(triangle.points[2].x, triangle.points[2].y, 0.0);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_P(target_point.x, target_point.y, 0.0);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_AB = vector_B - vector_A;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_BP = vector_P - vector_B;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d cross1 = vector_AB.cross(vector_BP);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_BC = vector_C - vector_B;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_CP = vector_P - vector_C;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d cross2 = vector_BC.cross(vector_CP);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_CA = vector_A - vector_C;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d vector_AP = vector_P - vector_A;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keyword">const</span> Eigen::Vector3d cross3 = vector_CA.cross(vector_AP);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">if</span> ((0 &lt; cross1.z() &amp;&amp; 0 &lt; cross2.z() &amp;&amp; 0 &lt; cross3.z()) || (cross1.z() &lt; 0 &amp;&amp; cross2.z() &lt; 0 &amp;&amp; cross3.z() &lt; 0))</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a320e7e8181cad788c41ce82b5fbd96ce">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a320e7e8181cad788c41ce82b5fbd96ce">DWAPlanner::motion</a>(<a class="code" href="classDWAPlanner_1_1State.html">State</a> &amp;state, <span class="keyword">const</span> <span class="keywordtype">double</span> velocity, <span class="keyword">const</span> <span class="keywordtype">double</span> yawrate)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> sim_time_step = <a class="code" href="classDWAPlanner.html#afb16cecacc328ba0dfa1a3741380f65b">predict_time_</a> / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<a class="code" href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">sim_time_samples_</a>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  state.<a class="code" href="classDWAPlanner_1_1State.html#a878214bada81b2ee685b590f0417aaa2">yaw_</a> += yawrate * sim_time_step;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  state.<a class="code" href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">x_</a> += velocity * std::cos(state.<a class="code" href="classDWAPlanner_1_1State.html#a878214bada81b2ee685b590f0417aaa2">yaw_</a>) * sim_time_step;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  state.<a class="code" href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">y_</a> += velocity * std::sin(state.<a class="code" href="classDWAPlanner_1_1State.html#a878214bada81b2ee685b590f0417aaa2">yaw_</a>) * sim_time_step;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  state.<a class="code" href="classDWAPlanner_1_1State.html#a5f58913a665cdf6d3bcbcab9d3535a88">velocity_</a> = velocity;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  state.<a class="code" href="classDWAPlanner_1_1State.html#a4f3b650eb238a2ae3845c0c554cd6628">yawrate_</a> = yawrate;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a80ff5a1ae9bee7f160e1f39749bda262">  715</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">DWAPlanner::create_obs_list</a>(<span class="keyword">const</span> sensor_msgs::LaserScan &amp;scan)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses.clear();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordtype">float</span> angle = scan.angle_min;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> angle_index_step = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classDWAPlanner.html#adcda02de1857cdde039ed3dabe4d4106">angle_resolution_</a> / scan.angle_increment);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; scan.ranges.size(); i++)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> r = scan.ranges[i];</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> (r &lt; scan.range_min || scan.range_max &lt; r || i % angle_index_step != 0)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      angle += scan.angle_increment;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    geometry_msgs::Pose pose;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    pose.position.x = r * cos(angle);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    pose.position.y = r * sin(angle);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses.push_back(pose);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    angle += scan.angle_increment;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">  736</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">DWAPlanner::create_obs_list</a>(<span class="keyword">const</span> nav_msgs::OccupancyGrid &amp;map)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;{</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses.clear();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> max_search_dist = hypot(map.info.origin.position.x, map.info.origin.position.y);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">float</span> angle = -M_PI; angle &lt;= M_PI; angle += <a class="code" href="classDWAPlanner.html#adcda02de1857cdde039ed3dabe4d4106">angle_resolution_</a>)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">float</span> dist = 0.0; dist &lt;= max_search_dist; dist += map.info.resolution)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      geometry_msgs::Pose pose;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      pose.position.x = dist * cos(angle);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      pose.position.y = dist * sin(angle);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> index_x = floor((pose.position.x - map.info.origin.position.x) / map.info.resolution);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> index_y = floor((pose.position.y - map.info.origin.position.y) / map.info.resolution);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> ((0 &lt;= index_x &amp;&amp; index_x &lt; map.info.width) &amp;&amp; (0 &lt;= index_y &amp;&amp; index_y &lt; map.info.height))</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span> (map.data[index_x + index_y * map.info.width] == 100)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;          <a class="code" href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">obs_list_</a>.poses.push_back(pose);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">  762</a></span>&#160;visualization_msgs::Marker <a class="code" href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">DWAPlanner::create_marker_msg</a>(</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">double</span> scale, <span class="keyword">const</span> std_msgs::ColorRGBA color, <span class="keyword">const</span> std::vector&lt;State&gt; &amp;trajectory,</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keyword">const</span> geometry_msgs::PolygonStamped &amp;footprint)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;{</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  visualization_msgs::Marker marker;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  marker.header.frame_id = <a class="code" href="classDWAPlanner.html#aba89ca88e42c4401e1391db53b4d2b8a">robot_frame_</a>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  marker.header.stamp = ros::Time::now();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  marker.id = id;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  marker.type = visualization_msgs::Marker::LINE_STRIP;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  marker.action = visualization_msgs::Marker::ADD;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  marker.pose.orientation.w = 1;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  marker.scale.x = scale;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  marker.color = color;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  marker.color.a = 0.8;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  marker.lifetime = ros::Duration();</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  geometry_msgs::Point p;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (footprint.polygon.points.empty())</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;point : trajectory)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      p.x = point.x_;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      p.y = point.y_;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      marker.points.push_back(p);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;point : footprint.polygon.points)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      p.x = point.x;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      p.y = point.y;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      marker.points.push_back(p);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    p.x = footprint.polygon.points.front().x;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    p.y = footprint.polygon.points.front().y;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    marker.points.push_back(p);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">return</span> marker;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a8d103793791af71de914b43e7b8a5134">  804</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a8d103793791af71de914b43e7b8a5134">DWAPlanner::visualize_trajectory</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;trajectory, <span class="keyword">const</span> ros::Publisher &amp;pub)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  std_msgs::ColorRGBA color;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  color.r = 1.0;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  visualization_msgs::Marker v_trajectory = <a class="code" href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">create_marker_msg</a>(0, <a class="code" href="classDWAPlanner.html#a7980adb5c585031a27aed3f953f4c674">v_path_width_</a>, color, trajectory);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  pub.publish(v_trajectory);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#af398e6211e5543357af9b72ea84f40a8">  812</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#af398e6211e5543357af9b72ea84f40a8">DWAPlanner::visualize_trajectories</a>(</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::vector&lt;State&gt;, <span class="keywordtype">bool</span>&gt;&gt; &amp;trajectories, <span class="keyword">const</span> ros::Publisher &amp;pub)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  visualization_msgs::MarkerArray v_trajectories;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; trajectories.size(); i++)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    std_msgs::ColorRGBA color;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">if</span> (trajectories[i].second)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      color.g = 1.0;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      color.r = 0.5;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      color.b = 0.5;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    visualization_msgs::Marker v_trajectory = <a class="code" href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">create_marker_msg</a>(i, <a class="code" href="classDWAPlanner.html#a7980adb5c585031a27aed3f953f4c674">v_path_width_</a> * 0.4, color, trajectories[i].first);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    v_trajectories.markers.push_back(v_trajectory);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  pub.publish(v_trajectories);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;}</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="classDWAPlanner.html#a8d03036507e7ab8b5187e9a8f0038316">  834</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDWAPlanner.html#a8d03036507e7ab8b5187e9a8f0038316">DWAPlanner::visualize_footprints</a>(<span class="keyword">const</span> std::vector&lt;State&gt; &amp;trajectory, <span class="keyword">const</span> ros::Publisher &amp;pub)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;{</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  std_msgs::ColorRGBA color;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  color.b = 1.0;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  visualization_msgs::MarkerArray v_footprints;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; trajectory.size(); i++)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keyword">const</span> geometry_msgs::PolygonStamped footprint = <a class="code" href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">move_footprint</a>(trajectory[i]);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    visualization_msgs::Marker v_footprint = <a class="code" href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">create_marker_msg</a>(i, <a class="code" href="classDWAPlanner.html#a7980adb5c585031a27aed3f953f4c674">v_path_width_</a> * 0.2, color, trajectory, footprint);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    v_footprints.markers.push_back(v_footprint);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  pub.publish(v_footprints);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassDWAPlanner_html_a9ff6bc1bb61fb6d9a94310a949b3d58f"><div class="ttname"><a href="classDWAPlanner.html#a9ff6bc1bb61fb6d9a94310a949b3d58f">DWAPlanner::dist_to_goal_th_sub_</a></div><div class="ttdeci">ros::Subscriber dist_to_goal_th_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00458">dwa_planner.h:458</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a655d7e12cbe359f26dfcf5b52e7a6b33"><div class="ttname"><a href="classDWAPlanner.html#a655d7e12cbe359f26dfcf5b52e7a6b33">DWAPlanner::finish_flag_pub_</a></div><div class="ttdeci">ros::Publisher finish_flag_pub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00457">dwa_planner.h:457</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a2821527877be42becc37cc9a867d3528"><div class="ttname"><a href="classDWAPlanner.html#a2821527877be42becc37cc9a867d3528">DWAPlanner::check_collision</a></div><div class="ttdeci">bool check_collision(const std::vector&lt; State &gt; &amp;traj)</div><div class="ttdoc">Check if the robot has collided.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00445">dwa_planner.cpp:445</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_adcda02de1857cdde039ed3dabe4d4106"><div class="ttname"><a href="classDWAPlanner.html#adcda02de1857cdde039ed3dabe4d4106">DWAPlanner::angle_resolution_</a></div><div class="ttdeci">double angle_resolution_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00419">dwa_planner.h:419</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_a878214bada81b2ee685b590f0417aaa2"><div class="ttname"><a href="classDWAPlanner_1_1State.html#a878214bada81b2ee685b590f0417aaa2">DWAPlanner::State::yaw_</a></div><div class="ttdeci">double yaw_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00070">dwa_planner.h:70</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_af9dcc8b5d0e860ea2d50f753a34a7a36"><div class="ttname"><a href="classDWAPlanner.html#af9dcc8b5d0e860ea2d50f753a34a7a36">DWAPlanner::scan_callback</a></div><div class="ttdeci">void scan_callback(const sensor_msgs::LaserScanConstPtr &amp;msg)</div><div class="ttdoc">A callback to hanldle buffering scan messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00105">dwa_planner.cpp:105</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a0e48f37c68a14272520398b948999b63"><div class="ttname"><a href="classDWAPlanner.html#a0e48f37c68a14272520398b948999b63">DWAPlanner::nh_</a></div><div class="ttdeci">ros::NodeHandle nh_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00451">dwa_planner.h:451</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a461198b6316c4b8d007957dff80008b2"><div class="ttname"><a href="classDWAPlanner.html#a461198b6316c4b8d007957dff80008b2">DWAPlanner::has_finished_</a></div><div class="ttdeci">std_msgs::Bool has_finished_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00473">dwa_planner.h:473</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_acc2706026b1ce2a7d83b2a33ef201145"><div class="ttname"><a href="classDWAPlanner.html#acc2706026b1ce2a7d83b2a33ef201145">DWAPlanner::scan_not_subscribe_count_</a></div><div class="ttdeci">int scan_not_subscribe_count_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00449">dwa_planner.h:449</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a27f250fe24e2a4f222fa45e457ac87a9"><div class="ttname"><a href="classDWAPlanner.html#a27f250fe24e2a4f222fa45e457ac87a9">DWAPlanner::use_scan_as_input_</a></div><div class="ttdeci">bool use_scan_as_input_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00436">dwa_planner.h:436</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a350b64cf0de51fbe656a09dd579de4f9"><div class="ttname"><a href="classDWAPlanner.html#a350b64cf0de51fbe656a09dd579de4f9">DWAPlanner::edge_on_global_path_sub_</a></div><div class="ttdeci">ros::Subscriber edge_on_global_path_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00459">dwa_planner.h:459</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac45d566b529f7420cef9e0e5a32907a0"><div class="ttname"><a href="classDWAPlanner.html#ac45d566b529f7420cef9e0e5a32907a0">DWAPlanner::generate_trajectory</a></div><div class="ttdeci">std::vector&lt; State &gt; generate_trajectory(const double velocity, const double yawrate)</div><div class="ttdoc">Generate trajectory.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00527">dwa_planner.cpp:527</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ad828f8cf5e3705c42fe494dbf0927e1a"><div class="ttname"><a href="classDWAPlanner.html#ad828f8cf5e3705c42fe494dbf0927e1a">DWAPlanner::calc_path_cost</a></div><div class="ttdeci">float calc_path_cost(const std::vector&lt; State &gt; &amp;traj)</div><div class="ttdoc">Calculate the path cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00508">dwa_planner.cpp:508</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_a4f3b650eb238a2ae3845c0c554cd6628"><div class="ttname"><a href="classDWAPlanner_1_1State.html#a4f3b650eb238a2ae3845c0c554cd6628">DWAPlanner::State::yawrate_</a></div><div class="ttdeci">double yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00072">dwa_planner.h:72</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a987b2b726a8c1a1a7963802de728e54e"><div class="ttname"><a href="classDWAPlanner.html#a987b2b726a8c1a1a7963802de728e54e">DWAPlanner::footprint_callback</a></div><div class="ttdeci">void footprint_callback(const geometry_msgs::PolygonStampedPtr &amp;msg)</div><div class="ttdoc">A calllback to handle buffering footprint messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00134">dwa_planner.cpp:134</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aee78d648c4143bbb16320b8cb4913753"><div class="ttname"><a href="classDWAPlanner.html#aee78d648c4143bbb16320b8cb4913753">DWAPlanner::calc_dynamic_window</a></div><div class="ttdeci">Window calc_dynamic_window(void)</div><div class="ttdoc">Calculate dynamic window.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00463">dwa_planner.cpp:463</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a6b0fc2a356d9c3c89863533b1e81091f"><div class="ttname"><a href="classDWAPlanner.html#a6b0fc2a356d9c3c89863533b1e81091f">DWAPlanner::obs_cost_gain_</a></div><div class="ttdeci">double obs_cost_gain_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00422">dwa_planner.h:422</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a840a031c8d25484bcab244edb39c97d5"><div class="ttname"><a href="classDWAPlanner.html#a840a031c8d25484bcab244edb39c97d5">DWAPlanner::calc_dist_from_robot</a></div><div class="ttdeci">float calc_dist_from_robot(const geometry_msgs::Point &amp;obstacle, const State &amp;state)</div><div class="ttdoc">Calculate the distance from robot footprint to the nearest obstacle.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00599">dwa_planner.cpp:599</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aeb3c7355707de25f99cf71e6c7382625"><div class="ttname"><a href="classDWAPlanner.html#aeb3c7355707de25f99cf71e6c7382625">DWAPlanner::min_yawrate_</a></div><div class="ttdeci">double min_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00412">dwa_planner.h:412</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aa8947f7df5a12a7f2ad844b8be1cb046"><div class="ttname"><a href="classDWAPlanner.html#aa8947f7df5a12a7f2ad844b8be1cb046">DWAPlanner::calc_dist_to_path</a></div><div class="ttdeci">float calc_dist_to_path(const State state)</div><div class="ttdoc">Calculate the distance of current pose to global path.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00516">dwa_planner.cpp:516</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a75f2b749625d62475f12f68c1ba86703"><div class="ttname"><a href="classDWAPlanner.html#a75f2b749625d62475f12f68c1ba86703">DWAPlanner::odom_not_subscribe_count_</a></div><div class="ttdeci">int odom_not_subscribe_count_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00447">dwa_planner.h:447</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a0eb2324a258632fd2a8cb7a02bbdb703"><div class="ttname"><a href="classDWAPlanner.html#a0eb2324a258632fd2a8cb7a02bbdb703">DWAPlanner::local_map_not_subscribe_count_</a></div><div class="ttdeci">int local_map_not_subscribe_count_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00448">dwa_planner.h:448</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_afb16cecacc328ba0dfa1a3741380f65b"><div class="ttname"><a href="classDWAPlanner.html#afb16cecacc328ba0dfa1a3741380f65b">DWAPlanner::predict_time_</a></div><div class="ttdeci">double predict_time_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00420">dwa_planner.h:420</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_adeb538e0e0f6c5c83034322155796242"><div class="ttname"><a href="classDWAPlanner.html#adeb538e0e0f6c5c83034322155796242">DWAPlanner::create_obs_list</a></div><div class="ttdeci">void create_obs_list(const nav_msgs::OccupancyGrid &amp;map)</div><div class="ttdoc">Get obstacle list from local map.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00736">dwa_planner.cpp:736</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a463096d7d4bcfc3bc7cd7a9cf9b9a398"><div class="ttname"><a href="classDWAPlanner.html#a463096d7d4bcfc3bc7cd7a9cf9b9a398">DWAPlanner::move_footprint</a></div><div class="ttdeci">geometry_msgs::PolygonStamped move_footprint(const State &amp;target_pose)</div><div class="ttdoc">Move the robot footprint to the target pose.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00613">dwa_planner.cpp:613</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aae7d1c62cfbe78b2d842775ed59947f6"><div class="ttname"><a href="classDWAPlanner.html#aae7d1c62cfbe78b2d842775ed59947f6">DWAPlanner::velocity_samples_</a></div><div class="ttdeci">int velocity_samples_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00443">dwa_planner.h:443</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a8483eacf800d05461dc065480e06727e"><div class="ttname"><a href="classDWAPlanner.html#a8483eacf800d05461dc065480e06727e">DWAPlanner::footprint_sub_</a></div><div class="ttdeci">ros::Subscriber footprint_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00460">dwa_planner.h:460</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a68b70a29964590639005a4bbded68778"><div class="ttname"><a href="classDWAPlanner.html#a68b70a29964590639005a4bbded68778">DWAPlanner::goal_callback</a></div><div class="ttdeci">void goal_callback(const geometry_msgs::PoseStampedConstPtr &amp;msg)</div><div class="ttdoc">A callback to hanldle buffering local goal messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00088">dwa_planner.cpp:88</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a0a449583ecdfc796e38a3c9b9475da4c"><div class="ttname"><a href="classDWAPlanner.html#a0a449583ecdfc796e38a3c9b9475da4c">DWAPlanner::max_velocity_</a></div><div class="ttdeci">double max_velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00409">dwa_planner.h:409</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a43f627b7c35d4e16e1ee80067daae75b"><div class="ttname"><a href="classDWAPlanner.html#a43f627b7c35d4e16e1ee80067daae75b">DWAPlanner::to_goal_cost_gain_</a></div><div class="ttdeci">double to_goal_cost_gain_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00423">dwa_planner.h:423</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ae2ee1947fa1e0e8350275e111889cdda"><div class="ttname"><a href="classDWAPlanner.html#ae2ee1947fa1e0e8350275e111889cdda">DWAPlanner::use_path_cost_</a></div><div class="ttdeci">bool use_path_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00437">dwa_planner.h:437</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_add9a8c8f11e295e5546ba6a3b203b244"><div class="ttname"><a href="classDWAPlanner.html#add9a8c8f11e295e5546ba6a3b203b244">DWAPlanner::DWAPlanner</a></div><div class="ttdeci">DWAPlanner(void)</div><div class="ttdoc">Constructor for the DWAPlanner.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00010">dwa_planner.cpp:10</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a87a87a7fe7eb6f6b279af965da562d6f"><div class="ttname"><a href="classDWAPlanner.html#a87a87a7fe7eb6f6b279af965da562d6f">DWAPlanner::velocity_pub_</a></div><div class="ttdeci">ros::Publisher velocity_pub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00453">dwa_planner.h:453</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a87923f18a97dd118ef3176072cb75626"><div class="ttname"><a href="classDWAPlanner.html#a87923f18a97dd118ef3176072cb75626">DWAPlanner::edge_on_global_path_callback</a></div><div class="ttdeci">void edge_on_global_path_callback(const nav_msgs::PathConstPtr &amp;msg)</div><div class="ttdoc">A callback to handle buffering edge on global path messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00150">dwa_planner.cpp:150</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aae53f07597841281fe61f4448c12c6dc"><div class="ttname"><a href="classDWAPlanner.html#aae53f07597841281fe61f4448c12c6dc">DWAPlanner::normalize_costs</a></div><div class="ttdeci">void normalize_costs(std::vector&lt; Cost &gt; &amp;costs)</div><div class="ttdoc">Normalize the costs.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00261">dwa_planner.cpp:261</a></div></div>
<div class="ttc" id="adwa__planner_8h_html"><div class="ttname"><a href="dwa__planner_8h.html">dwa_planner.h</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_a6fc166d61dc10063b7c2bab93f263a8a"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#a6fc166d61dc10063b7c2bab93f263a8a">DWAPlanner::Window::min_velocity_</a></div><div class="ttdeci">double min_velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00094">dwa_planner.h:94</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_afa0078eb743592e0218455cafe5686f9"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#afa0078eb743592e0218455cafe5686f9">DWAPlanner::Cost::to_goal_cost_</a></div><div class="ttdeci">float to_goal_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00137">dwa_planner.h:137</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a7bc416f6ce1395235566cfd60d7b1770"><div class="ttname"><a href="classDWAPlanner.html#a7bc416f6ce1395235566cfd60d7b1770">DWAPlanner::scan_updated_</a></div><div class="ttdeci">bool scan_updated_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00441">dwa_planner.h:441</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a3b0f356e84760a5f9dcb90e19b6efa69"><div class="ttname"><a href="classDWAPlanner.html#a3b0f356e84760a5f9dcb90e19b6efa69">DWAPlanner::sim_time_samples_</a></div><div class="ttdeci">int sim_time_samples_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00445">dwa_planner.h:445</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a8d03036507e7ab8b5187e9a8f0038316"><div class="ttname"><a href="classDWAPlanner.html#a8d03036507e7ab8b5187e9a8f0038316">DWAPlanner::visualize_footprints</a></div><div class="ttdeci">void visualize_footprints(const std::vector&lt; State &gt; &amp;trajectory, const ros::Publisher &amp;pub)</div><div class="ttdoc">Publish predicted footprints.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00834">dwa_planner.cpp:834</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ae8808a39a056f2b8aea650283e0e6139"><div class="ttname"><a href="classDWAPlanner.html#ae8808a39a056f2b8aea650283e0e6139">DWAPlanner::goal_msg_</a></div><div class="ttdeci">std::optional&lt; geometry_msgs::PoseStamped &gt; goal_msg_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00468">dwa_planner.h:468</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_a764332378cf66639480771a9eb7713ac"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#a764332378cf66639480771a9eb7713ac">DWAPlanner::Cost::path_cost_</a></div><div class="ttdeci">float path_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00139">dwa_planner.h:139</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_a5f58913a665cdf6d3bcbcab9d3535a88"><div class="ttname"><a href="classDWAPlanner_1_1State.html#a5f58913a665cdf6d3bcbcab9d3535a88">DWAPlanner::State::velocity_</a></div><div class="ttdeci">double velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00071">dwa_planner.h:71</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a2639f54e669e23a5022be9441fee3bf3"><div class="ttname"><a href="classDWAPlanner.html#a2639f54e669e23a5022be9441fee3bf3">DWAPlanner::calc_intersection</a></div><div class="ttdeci">geometry_msgs::Point calc_intersection(const geometry_msgs::Point &amp;obstacle, const State &amp;state, geometry_msgs::PolygonStamped footprint)</div><div class="ttdoc">Calculate the intersection point of the line and the circle.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00566">dwa_planner.cpp:566</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html">DWAPlanner::Cost</a></div><div class="ttdoc">A data class for cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00106">dwa_planner.h:106</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a07bcd1c208c69b7c2e421f52199c1939"><div class="ttname"><a href="classDWAPlanner.html#a07bcd1c208c69b7c2e421f52199c1939">DWAPlanner::min_in_place_yawrate_</a></div><div class="ttdeci">double min_in_place_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00414">dwa_planner.h:414</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html"><div class="ttname"><a href="classDWAPlanner_1_1State.html">DWAPlanner::State</a></div><div class="ttdoc">A data class for state of robot.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00050">dwa_planner.h:50</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html"><div class="ttname"><a href="classDWAPlanner_1_1Window.html">DWAPlanner::Window</a></div><div class="ttdoc">A data class for dynamic window.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00081">dwa_planner.h:81</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_aa3108f4915914a4b41c2b6cc4b8fcc98"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#aa3108f4915914a4b41c2b6cc4b8fcc98">DWAPlanner::Cost::obs_cost_</a></div><div class="ttdeci">float obs_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00136">dwa_planner.h:136</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ab601045c87c8925652ec423dd5c46062"><div class="ttname"><a href="classDWAPlanner.html#ab601045c87c8925652ec423dd5c46062">DWAPlanner::calc_cmd_vel</a></div><div class="ttdeci">geometry_msgs::Twist calc_cmd_vel(void)</div><div class="ttdoc">Calculate the command velocity.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00358">dwa_planner.cpp:358</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a489f2afb286a975b1416e0c356cc3d92"><div class="ttname"><a href="classDWAPlanner.html#a489f2afb286a975b1416e0c356cc3d92">DWAPlanner::max_yawrate_</a></div><div class="ttdeci">double max_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00411">dwa_planner.h:411</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ad481084566fe0bb82f732a8a8dbffe93"><div class="ttname"><a href="classDWAPlanner.html#ad481084566fe0bb82f732a8a8dbffe93">DWAPlanner::can_move</a></div><div class="ttdeci">bool can_move(void)</div><div class="ttdoc">Check if the robot can move.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00328">dwa_planner.cpp:328</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_adc309115613ed2fea5d5f5f5d9e1f2fe"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#adc309115613ed2fea5d5f5f5d9e1f2fe">DWAPlanner::Cost::show</a></div><div class="ttdeci">void show(void)</div><div class="ttdoc">Show the cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00077">dwa_planner.cpp:77</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a51b0f44c576d7d75b64a66733bf0e959"><div class="ttname"><a href="classDWAPlanner.html#a51b0f44c576d7d75b64a66733bf0e959">DWAPlanner::calc_obs_cost</a></div><div class="ttdeci">float calc_obs_cost(const std::vector&lt; State &gt; &amp;traj)</div><div class="ttdoc">Calculate obstacle cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00479">dwa_planner.cpp:479</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a0a6a9e24ea11d7a02203a9f2d57a6c2a"><div class="ttname"><a href="classDWAPlanner.html#a0a6a9e24ea11d7a02203a9f2d57a6c2a">DWAPlanner::use_footprint_</a></div><div class="ttdeci">bool use_footprint_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00435">dwa_planner.h:435</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a05cec7ce1a8d75286d3c2a757bb7fd40"><div class="ttname"><a href="classDWAPlanner.html#a05cec7ce1a8d75286d3c2a757bb7fd40">DWAPlanner::candidate_trajectories_pub_</a></div><div class="ttdeci">ros::Publisher candidate_trajectories_pub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00454">dwa_planner.h:454</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a6f4ad39dc3067623588dc8f58088e497"><div class="ttname"><a href="classDWAPlanner.html#a6f4ad39dc3067623588dc8f58088e497">DWAPlanner::path_cost_gain_</a></div><div class="ttdeci">double path_cost_gain_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00425">dwa_planner.h:425</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ae05204eadd96f3ce82863ce35173c54d"><div class="ttname"><a href="classDWAPlanner.html#ae05204eadd96f3ce82863ce35173c54d">DWAPlanner::listener_</a></div><div class="ttdeci">tf::TransformListener listener_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00475">dwa_planner.h:475</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a320e7e8181cad788c41ce82b5fbd96ce"><div class="ttname"><a href="classDWAPlanner.html#a320e7e8181cad788c41ce82b5fbd96ce">DWAPlanner::motion</a></div><div class="ttdeci">void motion(State &amp;state, const double velocity, const double yawrate)</div><div class="ttdoc">Simulate the robot motion.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00705">dwa_planner.cpp:705</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a9f69931d0d6bded376f1fd09b6a5bd80"><div class="ttname"><a href="classDWAPlanner.html#a9f69931d0d6bded376f1fd09b6a5bd80">DWAPlanner::local_map_sub_</a></div><div class="ttdeci">ros::Subscriber local_map_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00462">dwa_planner.h:462</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a6b737a7173a88d329229c4f6c032b469"><div class="ttname"><a href="classDWAPlanner.html#a6b737a7173a88d329229c4f6c032b469">DWAPlanner::hz_</a></div><div class="ttdeci">double hz_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00407">dwa_planner.h:407</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a90a0f83317eb1b24bb50ee20fa90f251"><div class="ttname"><a href="classDWAPlanner.html#a90a0f83317eb1b24bb50ee20fa90f251">DWAPlanner::odom_callback</a></div><div class="ttdeci">void odom_callback(const nav_msgs::OdometryConstPtr &amp;msg)</div><div class="ttdoc">A callback to hanldle buffering odometry messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00121">dwa_planner.cpp:121</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a8d103793791af71de914b43e7b8a5134"><div class="ttname"><a href="classDWAPlanner.html#a8d103793791af71de914b43e7b8a5134">DWAPlanner::visualize_trajectory</a></div><div class="ttdeci">void visualize_trajectory(const std::vector&lt; State &gt; &amp;trajectory, const ros::Publisher &amp;pub)</div><div class="ttdoc">Publish selected trajectory.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00804">dwa_planner.cpp:804</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_ab0a513399b6aad6c585e8706d1ba5b71"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#ab0a513399b6aad6c585e8706d1ba5b71">DWAPlanner::Cost::calc_total_cost</a></div><div class="ttdeci">void calc_total_cost(void)</div><div class="ttdoc">Calculate the total cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00086">dwa_planner.cpp:86</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a260998589030cf3ec16e817e23026f0a"><div class="ttname"><a href="classDWAPlanner.html#a260998589030cf3ec16e817e23026f0a">DWAPlanner::local_map_callback</a></div><div class="ttdeci">void local_map_callback(const nav_msgs::OccupancyGridConstPtr &amp;msg)</div><div class="ttdoc">A callback to hanldle buffering local map messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00113">dwa_planner.cpp:113</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a153ce2ec57ab3365fd9f17d7f5395853"><div class="ttname"><a href="classDWAPlanner.html#a153ce2ec57ab3365fd9f17d7f5395853">DWAPlanner::sim_direction_</a></div><div class="ttdeci">double sim_direction_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00429">dwa_planner.h:429</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac9a0ab8e147e8d8aaa752071d410d2dc"><div class="ttname"><a href="classDWAPlanner.html#ac9a0ab8e147e8d8aaa752071d410d2dc">DWAPlanner::calc_speed_cost</a></div><div class="ttdeci">float calc_speed_cost(const std::vector&lt; State &gt; &amp;traj)</div><div class="ttdoc">Calculate the speed cost.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00500">dwa_planner.cpp:500</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_af2e7c61dc465e5fdc78d2f5e30bf3257"><div class="ttname"><a href="classDWAPlanner.html#af2e7c61dc465e5fdc78d2f5e30bf3257">DWAPlanner::goal_sub_</a></div><div class="ttdeci">ros::Subscriber goal_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00461">dwa_planner.h:461</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ae44b49bc033ac28871f35634ced91e82"><div class="ttname"><a href="classDWAPlanner.html#ae44b49bc033ac28871f35634ced91e82">DWAPlanner::max_acceleration_</a></div><div class="ttdeci">double max_acceleration_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00415">dwa_planner.h:415</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aaa592c3dbe4ad17abdf59f09b47a2242"><div class="ttname"><a href="classDWAPlanner.html#aaa592c3dbe4ad17abdf59f09b47a2242">DWAPlanner::dist_to_goal_th_callback</a></div><div class="ttdeci">void dist_to_goal_th_callback(const std_msgs::Float64ConstPtr &amp;msg)</div><div class="ttdoc">A callback to handle buffering distance to goal threshold messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00144">dwa_planner.cpp:144</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ab9c2ee71d5221afa423ce9c1d4c31362"><div class="ttname"><a href="classDWAPlanner.html#ab9c2ee71d5221afa423ce9c1d4c31362">DWAPlanner::edge_points_on_path_</a></div><div class="ttdeci">std::optional&lt; nav_msgs::Path &gt; edge_points_on_path_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00471">dwa_planner.h:471</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aae6d46481efb31274002c20048ebec3f"><div class="ttname"><a href="classDWAPlanner.html#aae6d46481efb31274002c20048ebec3f">DWAPlanner::current_cmd_vel_</a></div><div class="ttdeci">geometry_msgs::Twist current_cmd_vel_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00467">dwa_planner.h:467</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a40a68af9d1aa523e8b0a9064245ed40c"><div class="ttname"><a href="classDWAPlanner.html#a40a68af9d1aa523e8b0a9064245ed40c">DWAPlanner::obs_list_</a></div><div class="ttdeci">geometry_msgs::PoseArray obs_list_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00469">dwa_planner.h:469</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac6b9c096dbcb9a93b035e8126f560aee"><div class="ttname"><a href="classDWAPlanner.html#ac6b9c096dbcb9a93b035e8126f560aee">DWAPlanner::yawrate_samples_</a></div><div class="ttdeci">int yawrate_samples_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00444">dwa_planner.h:444</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a671005ef52b7acde226ef9b4c2c3cb3b"><div class="ttname"><a href="classDWAPlanner.html#a671005ef52b7acde226ef9b4c2c3cb3b">DWAPlanner::target_velocity_callback</a></div><div class="ttdeci">void target_velocity_callback(const geometry_msgs::TwistConstPtr &amp;msg)</div><div class="ttdoc">A callback to hanldle buffering target velocity messages.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00128">dwa_planner.cpp:128</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a50de685d9878e76a3c5143fbda4c66a1"><div class="ttname"><a href="classDWAPlanner.html#a50de685d9878e76a3c5143fbda4c66a1">DWAPlanner::angle_to_goal_th_</a></div><div class="ttdeci">double angle_to_goal_th_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00428">dwa_planner.h:428</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_ac6ba1f416961bc4d90d9afc2346d7457"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#ac6ba1f416961bc4d90d9afc2346d7457">DWAPlanner::Window::max_velocity_</a></div><div class="ttdeci">double max_velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00095">dwa_planner.h:95</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_af398e6211e5543357af9b72ea84f40a8"><div class="ttname"><a href="classDWAPlanner.html#af398e6211e5543357af9b72ea84f40a8">DWAPlanner::visualize_trajectories</a></div><div class="ttdeci">void visualize_trajectories(const std::vector&lt; std::pair&lt; std::vector&lt; State &gt;, bool &gt;&gt; &amp;trajectories, const ros::Publisher &amp;pub)</div><div class="ttdoc">Publish candidate trajectories.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00812">dwa_planner.cpp:812</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_a4c5dc99385cf7d4217c3a51d6cba910e"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#a4c5dc99385cf7d4217c3a51d6cba910e">DWAPlanner::Cost::Cost</a></div><div class="ttdeci">Cost(void)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00065">dwa_planner.cpp:65</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a0673ca747da2b9d898408bf3f6b1ef35"><div class="ttname"><a href="classDWAPlanner.html#a0673ca747da2b9d898408bf3f6b1ef35">DWAPlanner::sleep_time_after_finish_</a></div><div class="ttdeci">double sleep_time_after_finish_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00421">dwa_planner.h:421</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_a73164c3b83e2e4e51b17b85a7c22a322"><div class="ttname"><a href="classDWAPlanner_1_1State.html#a73164c3b83e2e4e51b17b85a7c22a322">DWAPlanner::State::x_</a></div><div class="ttdeci">double x_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00068">dwa_planner.h:68</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aacd71717ea2fa4a6c2d8a9eec186e189"><div class="ttname"><a href="classDWAPlanner.html#aacd71717ea2fa4a6c2d8a9eec186e189">DWAPlanner::is_inside_of_triangle</a></div><div class="ttdeci">bool is_inside_of_triangle(const geometry_msgs::Point &amp;target_point, const geometry_msgs::Polygon &amp;triangle)</div><div class="ttdoc">Check if the target point is inside of triangle.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00674">dwa_planner.cpp:674</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a8de4fbc9efa1a16b62e2771c195042b8"><div class="ttname"><a href="classDWAPlanner.html#a8de4fbc9efa1a16b62e2771c195042b8">DWAPlanner::sim_period_</a></div><div class="ttdeci">double sim_period_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00418">dwa_planner.h:418</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a1a8deecdb6e6d4bcb0a953bbfb6cf436"><div class="ttname"><a href="classDWAPlanner.html#a1a8deecdb6e6d4bcb0a953bbfb6cf436">DWAPlanner::dist_to_goal_th_</a></div><div class="ttdeci">double dist_to_goal_th_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00426">dwa_planner.h:426</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_abfa3ac6593ebdea54223da288841b1ca"><div class="ttname"><a href="classDWAPlanner.html#abfa3ac6593ebdea54223da288841b1ca">DWAPlanner::obs_range_</a></div><div class="ttdeci">double obs_range_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00431">dwa_planner.h:431</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_a8216a1c20408c93b363ec189b56f5962"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#a8216a1c20408c93b363ec189b56f5962">DWAPlanner::Cost::speed_cost_</a></div><div class="ttdeci">float speed_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00138">dwa_planner.h:138</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_ad308cdb162caaf7e8a749424ee8a81a5"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#ad308cdb162caaf7e8a749424ee8a81a5">DWAPlanner::Window::Window</a></div><div class="ttdeci">Window(void)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00052">dwa_planner.cpp:52</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Cost_html_a88ad9123fd6a216dda6f6620d2eb6f18"><div class="ttname"><a href="classDWAPlanner_1_1Cost.html#a88ad9123fd6a216dda6f6620d2eb6f18">DWAPlanner::Cost::total_cost_</a></div><div class="ttdeci">float total_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00140">dwa_planner.h:140</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_adbc44965f21a9f550aad4b39effc705e"><div class="ttname"><a href="classDWAPlanner.html#adbc44965f21a9f550aad4b39effc705e">DWAPlanner::scan_sub_</a></div><div class="ttdeci">ros::Subscriber scan_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00464">dwa_planner.h:464</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_ab3957b83074f94c8dfa3fb3a3c59851c"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#ab3957b83074f94c8dfa3fb3a3c59851c">DWAPlanner::Window::show</a></div><div class="ttdeci">void show(void)</div><div class="ttdoc">Show the dynamic window information.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00054">dwa_planner.cpp:54</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a7980adb5c585031a27aed3f953f4c674"><div class="ttname"><a href="classDWAPlanner.html#a7980adb5c585031a27aed3f953f4c674">DWAPlanner::v_path_width_</a></div><div class="ttdeci">double v_path_width_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00434">dwa_planner.h:434</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_abff251f2fbf87c65af5da3937ec475bb"><div class="ttname"><a href="classDWAPlanner.html#abff251f2fbf87c65af5da3937ec475bb">DWAPlanner::max_deceleration_</a></div><div class="ttdeci">double max_deceleration_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00416">dwa_planner.h:416</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_a170e74beb0d29fd38902f2815589f508"><div class="ttname"><a href="classDWAPlanner_1_1State.html#a170e74beb0d29fd38902f2815589f508">DWAPlanner::State::y_</a></div><div class="ttdeci">double y_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00069">dwa_planner.h:69</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ae079e837dcdd7897fae18a09614bc863"><div class="ttname"><a href="classDWAPlanner.html#ae079e837dcdd7897fae18a09614bc863">DWAPlanner::use_speed_cost_</a></div><div class="ttdeci">bool use_speed_cost_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00438">dwa_planner.h:438</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a9c3faf43ce5629b5468141c47f637461"><div class="ttname"><a href="classDWAPlanner.html#a9c3faf43ce5629b5468141c47f637461">DWAPlanner::has_reached_</a></div><div class="ttdeci">bool has_reached_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00442">dwa_planner.h:442</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_accb330377e1503287d4228d334b61287"><div class="ttname"><a href="classDWAPlanner.html#accb330377e1503287d4228d334b61287">DWAPlanner::print_params</a></div><div class="ttdeci">void print_params(void)</div><div class="ttdoc">Print parameters.</div><div class="ttdef"><b>Definition:</b> <a href="parameters_8cpp_source.html#l00064">parameters.cpp:64</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a5508317f853be8074ec762e9204526e4"><div class="ttname"><a href="classDWAPlanner.html#a5508317f853be8074ec762e9204526e4">DWAPlanner::local_nh_</a></div><div class="ttdeci">ros::NodeHandle local_nh_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00452">dwa_planner.h:452</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a7ff50924e740d16a990e607ec5a043cd"><div class="ttname"><a href="classDWAPlanner.html#a7ff50924e740d16a990e607ec5a043cd">DWAPlanner::load_params</a></div><div class="ttdeci">void load_params(void)</div><div class="ttdoc">Load parameters.</div><div class="ttdef"><b>Definition:</b> <a href="parameters_8cpp_source.html#l00008">parameters.cpp:8</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_adb0934bf6918c7af1a6b846a1d6cfd8a"><div class="ttname"><a href="classDWAPlanner.html#adb0934bf6918c7af1a6b846a1d6cfd8a">DWAPlanner::evaluate_trajectory</a></div><div class="ttdeci">Cost evaluate_trajectory(const std::vector&lt; State &gt; &amp;trajectory, const Eigen::Vector3d &amp;goal)</div><div class="ttdoc">Evaluate trajectory.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00555">dwa_planner.cpp:555</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_a3aeb6f0ec9378876527d1dd9b4bff57b"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#a3aeb6f0ec9378876527d1dd9b4bff57b">DWAPlanner::Window::max_yawrate_</a></div><div class="ttdeci">double max_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00097">dwa_planner.h:97</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a12cabee5b51e8efaded6796d0b4ba84b"><div class="ttname"><a href="classDWAPlanner.html#a12cabee5b51e8efaded6796d0b4ba84b">DWAPlanner::can_adjust_robot_direction</a></div><div class="ttdeci">bool can_adjust_robot_direction(const Eigen::Vector3d &amp;goal)</div><div class="ttdoc">Check if the robot can adjust the direction.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00430">dwa_planner.cpp:430</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_afd7eeefae6b6c03b987c7a7bef0b1030"><div class="ttname"><a href="classDWAPlanner.html#afd7eeefae6b6c03b987c7a7bef0b1030">DWAPlanner::footprint_</a></div><div class="ttdeci">std::optional&lt; geometry_msgs::PolygonStamped &gt; footprint_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00470">dwa_planner.h:470</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a86c80590b91e97104cfe300ffbd1383c"><div class="ttname"><a href="classDWAPlanner.html#a86c80590b91e97104cfe300ffbd1383c">DWAPlanner::local_map_updated_</a></div><div class="ttdeci">bool local_map_updated_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00440">dwa_planner.h:440</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a69508170a18753d06dec87f99c59eb6e"><div class="ttname"><a href="classDWAPlanner.html#a69508170a18753d06dec87f99c59eb6e">DWAPlanner::slow_velocity_th_</a></div><div class="ttdeci">double slow_velocity_th_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00430">dwa_planner.h:430</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a60b3fffeaa811afd6dea2104760ab824"><div class="ttname"><a href="classDWAPlanner.html#a60b3fffeaa811afd6dea2104760ab824">DWAPlanner::create_marker_msg</a></div><div class="ttdeci">visualization_msgs::Marker create_marker_msg(const int id, const double scale, const std_msgs::ColorRGBA color, const std::vector&lt; State &gt; &amp;trajectory, const geometry_msgs::PolygonStamped &amp;footprint=geometry_msgs::PolygonStamped())</div><div class="ttdoc">Create a marker message.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00762">dwa_planner.cpp:762</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aba89ca88e42c4401e1391db53b4d2b8a"><div class="ttname"><a href="classDWAPlanner.html#aba89ca88e42c4401e1391db53b4d2b8a">DWAPlanner::robot_frame_</a></div><div class="ttdeci">std::string robot_frame_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00406">dwa_planner.h:406</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a966a8178627cee9001f042a07d934aec"><div class="ttname"><a href="classDWAPlanner.html#a966a8178627cee9001f042a07d934aec">DWAPlanner::predict_footprints_pub_</a></div><div class="ttdeci">ros::Publisher predict_footprints_pub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00456">dwa_planner.h:456</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac63a462c7660f12c9c6ac79b6717e7c4"><div class="ttname"><a href="classDWAPlanner.html#ac63a462c7660f12c9c6ac79b6717e7c4">DWAPlanner::process</a></div><div class="ttdeci">void process(void)</div><div class="ttdoc">Execute local path planning.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00303">dwa_planner.cpp:303</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1State_html_aa89c6d37950cc88646e2d1c915f343ee"><div class="ttname"><a href="classDWAPlanner_1_1State.html#aa89c6d37950cc88646e2d1c915f343ee">DWAPlanner::State::State</a></div><div class="ttdeci">State(void)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00045">dwa_planner.cpp:45</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a2174dc1fa664acb76368808bdb2fe179"><div class="ttname"><a href="classDWAPlanner.html#a2174dc1fa664acb76368808bdb2fe179">DWAPlanner::dwa_planning</a></div><div class="ttdeci">std::vector&lt; State &gt; dwa_planning(const Eigen::Vector3d &amp;goal, std::vector&lt; std::pair&lt; std::vector&lt; State &gt;, bool &gt;&gt; &amp;trajectories)</div><div class="ttdoc">Execute dwa planning.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00167">dwa_planner.cpp:167</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a6f33c3917f8984609afae530828612e2"><div class="ttname"><a href="classDWAPlanner.html#a6f33c3917f8984609afae530828612e2">DWAPlanner::subscribe_count_th_</a></div><div class="ttdeci">int subscribe_count_th_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00446">dwa_planner.h:446</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac0032d860e85f03c309168f6e557e39f"><div class="ttname"><a href="classDWAPlanner.html#ac0032d860e85f03c309168f6e557e39f">DWAPlanner::selected_trajectory_pub_</a></div><div class="ttdeci">ros::Publisher selected_trajectory_pub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00455">dwa_planner.h:455</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a5d162a39c979fe8024aaa4a2babd3f17"><div class="ttname"><a href="classDWAPlanner.html#a5d162a39c979fe8024aaa4a2babd3f17">DWAPlanner::target_velocity_sub_</a></div><div class="ttdeci">ros::Subscriber target_velocity_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00465">dwa_planner.h:465</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a11369ac49bea10466ca789168ea6c71e"><div class="ttname"><a href="classDWAPlanner.html#a11369ac49bea10466ca789168ea6c71e">DWAPlanner::odom_sub_</a></div><div class="ttdeci">ros::Subscriber odom_sub_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00463">dwa_planner.h:463</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a5f5a93a9a3e3534ace921095d813e6d9"><div class="ttname"><a href="classDWAPlanner.html#a5f5a93a9a3e3534ace921095d813e6d9">DWAPlanner::is_inside_of_robot</a></div><div class="ttdeci">bool is_inside_of_robot(const geometry_msgs::Point &amp;obstacle, const geometry_msgs::PolygonStamped &amp;footprint, const State &amp;state)</div><div class="ttdoc">Check if the obstacle is inside of robot footprint.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00649">dwa_planner.cpp:649</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a3c3b2296c51126e0d12557566ace0453"><div class="ttname"><a href="classDWAPlanner.html#a3c3b2296c51126e0d12557566ace0453">DWAPlanner::turn_direction_th_</a></div><div class="ttdeci">double turn_direction_th_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00427">dwa_planner.h:427</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a2151c7a05e2111ec1cf0c501b265a493"><div class="ttname"><a href="classDWAPlanner.html#a2151c7a05e2111ec1cf0c501b265a493">DWAPlanner::speed_cost_gain_</a></div><div class="ttdeci">double speed_cost_gain_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00424">dwa_planner.h:424</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ab42a379ef62d72d9b23ff1de6c9416bd"><div class="ttname"><a href="classDWAPlanner.html#ab42a379ef62d72d9b23ff1de6c9416bd">DWAPlanner::robot_radius_</a></div><div class="ttdeci">double robot_radius_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00432">dwa_planner.h:432</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_abc0f00d95e9643456d4be61322c7ed30"><div class="ttname"><a href="classDWAPlanner.html#abc0f00d95e9643456d4be61322c7ed30">DWAPlanner::max_d_yawrate_</a></div><div class="ttdeci">double max_d_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00417">dwa_planner.h:417</a></div></div>
<div class="ttc" id="aclassDWAPlanner_1_1Window_html_ad9d72c1a09fac5f634709f98f2df61b8"><div class="ttname"><a href="classDWAPlanner_1_1Window.html#ad9d72c1a09fac5f634709f98f2df61b8">DWAPlanner::Window::min_yawrate_</a></div><div class="ttdeci">double min_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00096">dwa_planner.h:96</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a93309a99fd864dafa45f6b7390d781c3"><div class="ttname"><a href="classDWAPlanner.html#a93309a99fd864dafa45f6b7390d781c3">DWAPlanner::calc_to_goal_cost</a></div><div class="ttdeci">float calc_to_goal_cost(const std::vector&lt; State &gt; &amp;traj, const Eigen::Vector3d &amp;goal)</div><div class="ttdoc">Calculate the distance of current pose to goal pose.</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8cpp_source.html#l00473">dwa_planner.cpp:473</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_aa138c408a334a2e07955e405cc9042d7"><div class="ttname"><a href="classDWAPlanner.html#aa138c408a334a2e07955e405cc9042d7">DWAPlanner::target_velocity_</a></div><div class="ttdeci">double target_velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00408">dwa_planner.h:408</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_acc27d2dfefaa7903b413e8d37f36dab0"><div class="ttname"><a href="classDWAPlanner.html#acc27d2dfefaa7903b413e8d37f36dab0">DWAPlanner::footprint_padding_</a></div><div class="ttdeci">double footprint_padding_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00433">dwa_planner.h:433</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_ac2cd905a4ff32631d4f498a7a914fe0e"><div class="ttname"><a href="classDWAPlanner.html#ac2cd905a4ff32631d4f498a7a914fe0e">DWAPlanner::max_in_place_yawrate_</a></div><div class="ttdeci">double max_in_place_yawrate_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00413">dwa_planner.h:413</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a533327c9fae4aceb07a959958b24dd75"><div class="ttname"><a href="classDWAPlanner.html#a533327c9fae4aceb07a959958b24dd75">DWAPlanner::odom_updated_</a></div><div class="ttdeci">bool odom_updated_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00439">dwa_planner.h:439</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_afe2097eedd8de9ce635105c4b34c356e"><div class="ttname"><a href="classDWAPlanner.html#afe2097eedd8de9ce635105c4b34c356e">DWAPlanner::global_frame_</a></div><div class="ttdeci">std::string global_frame_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00405">dwa_planner.h:405</a></div></div>
<div class="ttc" id="aclassDWAPlanner_html_a9498b7b4e03f58e8286475a0c0f6d2ce"><div class="ttname"><a href="classDWAPlanner.html#a9498b7b4e03f58e8286475a0c0f6d2ce">DWAPlanner::min_velocity_</a></div><div class="ttdeci">double min_velocity_</div><div class="ttdef"><b>Definition:</b> <a href="dwa__planner_8h_source.html#l00410">dwa_planner.h:410</a></div></div>

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/dwa_planner">dwa_planner</a><br />
Author(s): </br />
<small>autogenerated on Thu May 9 2024 01:28:03</small>
</div>
</body>
</html>
